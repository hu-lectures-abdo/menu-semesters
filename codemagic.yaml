workflows:
  web-app:
    name: Web Build
    max_build_duration: 30
    instance_type: mac_pro  # استخدام جهاز mac_pro للحصول على مساحة أكبر
    environment:
      node: latest  # أحدث إصدار من Node.js

    scripts:
      - name: Clean up disk space
        script: |
          df -h  # عرض المساحة قبل التنظيف
          rm -rf ~/.gradle/caches/
          rm -rf ~/.gradle/wrapper/
          rm -rf ~/.pub-cache/
          df -h  # عرض المساحة بعد التنظيف

      - name: Skip heavy build steps (لحفظ المساحة)
        script: echo "Skipping unnecessary build steps to save space"

      - name: Install dependencies (إذا كنت تستخدم npm)
        script: |
          if [ -f package.json ]; then
            npm install
          fi

      - name: Build project (إذا كنت تستخدم Webpack أو Vite)
        script: |
          if [ -f package.json ]; then
            npm run build
          fi

    artifacts:
      - build/**/*.apk  # فقط ملفات APK المطلوبة (إذا كان هناك بناء Android)
      - build/index.html  # ملف HTML الرئيسي فقط
